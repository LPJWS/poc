(this.webpackJsonppoc=this.webpackJsonppoc||[]).push([[0],{121:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c.n(n),r=c(22),s=c.n(r),l=c(20),o=c.n(l),a=c(27),j=c.n(a),d=c(31),h=c(17),b=c(4),u=(c(119),c(123)),x=c(122),O=c(125),f=c(126),m=c(124),p=c(127),g=c(2),v=function(e){var t=e.id,c=e.go,r=e.fetchedUser,s=Object(n.useState)(null),l=Object(h.a)(s,2),o=l[0],a=l[1],j=Object(n.useState)(null),d=Object(h.a)(j,2),v=d[0],y=d[1],w=Object(n.useState)(!1),k=Object(h.a)(w,2),z=k[0],T=k[1];function S(){a(Object(g.jsx)(b.r,{}));var e=window.location.search.slice(1);fetch("https://pieceofchit.xyz/api/v1/member/me/?"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(e){a(null),y(e)}))}return Object(n.useEffect)((function(){S()}),[]),Object(g.jsx)(b.t,{activePanel:t,popout:o,children:Object(g.jsx)(b.m,{id:t,children:Object(g.jsxs)(b.p,{onRefresh:function(){T(!0),S(),T(!1)},isFetching:z,children:[Object(g.jsx)(b.n,{children:"\u041f\u043e\u0434\u0435\u043b\u0438\u043c?"}),v&&Object(g.jsx)(b.i,{children:Object(g.jsxs)(b.h,{style:{margin:"-7px -7px 0 -7px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32},children:[v.photo?Object(g.jsx)(b.c,{size:96,src:v.photo}):null,Object(g.jsx)(b.s,{style:{marginBottom:8,marginTop:20},level:"2",weight:"medium",children:v.name})]})}),v&&Object(g.jsxs)(b.i,{header:Object(g.jsx)(b.j,{children:"\u0421\u0447\u0435\u0442\u0430"}),children:[v.checks.length?v.checks.map((function(e,t){return Object(g.jsx)(b.e,{before:Object(g.jsx)(x.a,{}),description:e.total_amount+" \u20bd",after:Object(g.jsx)(u.a,{}),onClick:c,"data-to":"check","data-check":e.id,children:Object(g.jsx)(b.s,{level:"2",weight:"regular",children:e.title})},e.id)})):Object(g.jsxs)(b.f,{style:{alignItems:"center",display:"flex",flexDirection:"column"},children:[Object(g.jsx)(b.s,{level:"2",weight:"regular",children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0441\u0447\u0435\u0442\u043e\u0432"}),Object(g.jsx)(m.a,{style:{marginTop:".5rem"}})]}),Object(g.jsx)(b.f,{children:Object(g.jsx)(b.d,{stretched:!0,size:"l",mode:"outline",onClick:c,"data-to":"create",children:Object(g.jsx)(O.a,{})})})]}),v&&Object(g.jsx)(b.i,{header:Object(g.jsx)(b.j,{children:"\u0414\u043e\u043b\u0433\u0438"}),children:v.debts.length?v.debts.map((function(e,t){return e.is_sended?Object(g.jsx)(b.q,{disabled:!0,multiline:!0,text:e.check_obj.title,before:Object(g.jsx)(b.c,{size:72,src:e.to_member.photo}),after:e.amount+" \u20bd",caption:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",children:Object(g.jsx)(b.s,{level:"2",weight:"regular",children:e.to_member.name})},e.id):Object(g.jsx)(b.q,{disabled:!0,multiline:!0,text:e.check_obj.title,before:Object(g.jsx)(b.c,{size:72,src:e.to_member.photo}),after:e.amount+" \u20bd",actions:Object(g.jsx)(i.a.Fragment,{children:Object(g.jsxs)(b.d,{children:["\u042f \u043f\u0435\u0440\u0435\u0432\u0435\u043b ",1==+r.sex?"\u0430":""]})}),children:Object(g.jsx)(b.s,{level:"2",weight:"regular",children:e.to_member.name})},e.id)})):Object(g.jsxs)(b.f,{style:{alignItems:"center",display:"flex",flexDirection:"column"},children:[Object(g.jsx)(b.s,{level:"2",weight:"regular",children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u043b\u0433\u043e\u0432"}),Object(g.jsx)(f.a,{style:{marginTop:".5rem"}})]})}),v&&Object(g.jsx)(b.i,{header:Object(g.jsx)(b.j,{children:"\u0414\u043e\u043b\u0436\u043d\u0438\u043a\u0438"}),children:v.debtors.length?v.debtors.map((function(e,t){return e.is_sended?Object(g.jsx)(b.q,{disabled:!0,multiline:!0,text:e.check_obj.title,before:Object(g.jsx)(b.c,{size:72,src:e.from_member.photo}),after:e.amount+" \u20bd",actions:Object(g.jsx)(i.a.Fragment,{children:Object(g.jsx)(b.d,{children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0434"})}),children:Object(g.jsx)(b.s,{level:"2",weight:"regular",children:e.from_member.name})},e.id):Object(g.jsx)(b.q,{disabled:!0,multiline:!0,text:e.check_obj.title,before:Object(g.jsx)(b.c,{size:72,src:e.from_member.photo}),after:e.amount+" \u20bd",caption:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0432\u043e\u0434",children:Object(g.jsx)(b.s,{level:"2",weight:"regular",children:e.from_member.name})},e.id)})):Object(g.jsxs)(b.f,{style:{alignItems:"center",display:"flex",flexDirection:"column"},children:[Object(g.jsx)(b.s,{level:"2",weight:"regular",children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u043b\u0436\u043d\u0438\u043a\u043e\u0432"}),Object(g.jsx)(p.a,{style:{marginTop:".5rem"}})]})})]})})})},y=function(e){var t=Object(n.useState)(null),c=Object(h.a)(t,2),i=c[0],r=c[1],s=Object(n.useState)(null),l=Object(h.a)(s,2),o=l[0],a=l[1];return Object(n.useEffect)((function(){!function(){r(Object(g.jsx)(b.r,{}));var e=window.location.search.slice(1);fetch("https://pieceofchit.xyz/api/v1/member/me/?"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(e){r(null),a(e)}))}()}),[]),Object(g.jsx)(b.t,{activePanel:e.id,popout:i,children:Object(g.jsxs)(b.m,{id:e.id,children:[Object(g.jsx)(b.n,{left:Object(g.jsx)(b.o,{onClick:e.go,"data-to":"home"}),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0447\u0435\u0442"}),o&&Object(g.jsx)(b.i,{children:Object(g.jsx)(b.g,{})})]})})},w=c(129),k=c(130),z=c(128),T=function(e){var t=Object(n.useState)(null),c=Object(h.a)(t,2),i=c[0],r=c[1],s=Object(n.useState)(null),l=Object(h.a)(s,2),o=l[0],a=l[1],j=Object(n.useState)(null),d=Object(h.a)(j,2),u=d[0],x=d[1],f=Object(n.useState)(!1),p=Object(h.a)(f,2),v=p[0],y=p[1],T=Object(n.useState)(null),S=Object(h.a)(T,2),_=S[0],C=S[1];function E(){r(Object(g.jsx)(b.r,{}));var e=window.location.search.slice(1);fetch("https://pieceofchit.xyz/api/v1/member/me/?"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(e){r(null),a(e)}))}function I(){r(Object(g.jsx)(b.r,{}));var t=window.location.search.slice(1);fetch("https://pieceofchit.xyz/api/v1/check/get/"+e.check+"/?"+t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(e){r(null),x(e)}))}var D=Object(g.jsxs)(b.l,{activeModal:_,children:[Object(g.jsx)(b.k,{id:"close",onClose:function(){return C(null)},icon:Object(g.jsx)(z.a,{}),header:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u0447\u0435\u0442?",subheader:"\u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u043b\u044c\u0437\u044f \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0437\u0430\u0442\u0440\u0430\u0442\u044b, \u0430 \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0441\u0447\u0435\u0442\u0430 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u043d\u044b \u0441\u0443\u043c\u043c\u044b \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u043e\u0432",actions:Object(g.jsx)(b.d,{size:"l",mode:"primary",onClick:e.go,"data-to":"home","data-checkclose":u?u.id:null,children:"\u0414\u0430, \u0437\u0430\u043a\u0440\u044b\u0442\u044c"})}),Object(g.jsx)(b.k,{id:"leave",onClose:function(){return C(null)},icon:Object(g.jsx)(z.a,{}),header:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0441\u0447\u0435\u0442?",actions:Object(g.jsx)(b.d,{size:"l",mode:"primary",onClick:e.go,"data-to":"home","data-checkleave":u?u.id:null,children:"\u0414\u0430, \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c"})})]});return Object(n.useEffect)((function(){E(),I()}),[]),Object(g.jsx)(b.t,{activePanel:e.id,popout:i,modal:D,children:u&&Object(g.jsx)(b.m,{id:e.id,children:Object(g.jsxs)(b.p,{onRefresh:function(){y(!0),E(),I(),y(!1)},isFetching:v,children:[Object(g.jsx)(b.n,{left:Object(g.jsx)(b.o,{onClick:e.go,"data-to":"home"}),children:u.title}),Object(g.jsx)(b.i,{children:Object(g.jsxs)(b.h,{style:{margin:"-7px -7px 0 -7px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32},children:[Object(g.jsx)(b.s,{level:"1",weight:"heavy",style:{marginBottom:16},children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0441\u0447\u0435\u0442\u0430"}),Object(g.jsxs)(b.s,{level:"1",weight:"heavy",style:{marginBottom:16},children:[u.total_amount," \u20bd"]})]})}),Object(g.jsxs)(b.i,{header:Object(g.jsx)(b.j,{indicator:u.members.length,children:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"}),children:[u.members.length?u.members.map((function(e,t){return Object(g.jsx)(b.e,{disabled:!0,before:Object(g.jsx)(b.c,{size:44,src:e.photo}),badge:e.id===u.organizer.id?Object(g.jsx)(w.a,{}):"",children:e.name},e.id)})):Object(g.jsxs)(b.f,{style:{alignItems:"center",display:"flex",flexDirection:"column"},children:[Object(g.jsx)(b.s,{level:"2",weight:"regular",children:"\u041d\u0435\u0442 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 ?! \u0414\u0430 \u043a\u0430\u043a \u0442\u0430\u043a\u043e\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e?!"}),Object(g.jsx)(m.a,{style:{marginTop:".5rem"}})]}),Object(g.jsx)(b.f,{children:Object(g.jsx)(b.d,{stretched:!0,size:"l",mode:"outline",before:Object(g.jsx)(k.a,{}),children:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c"})})]}),Object(g.jsxs)(b.i,{header:Object(g.jsx)(b.j,{indicator:u.records.length,children:"\u0417\u0430\u0442\u0440\u0430\u0442\u044b"}),children:[u.records.length?u.records.map((function(e,t){return Object(g.jsx)(b.q,{disabled:!0,multiline:!0,text:e.object,before:Object(g.jsx)(b.c,{size:72,src:e.member.photo}),after:e.amount+" \u20bd",indicator:e.amount+" \u20bd",caption:e.desc,children:Object(g.jsx)(b.s,{level:"2",weight:"regular",children:e.member.name})},e.id)})):Object(g.jsxs)(b.f,{style:{alignItems:"center",display:"flex",flexDirection:"column"},children:[Object(g.jsx)(b.s,{level:"2",weight:"regular",children:"\u0422\u0440\u0430\u0442 \u0435\u0449\u0435 \u043d\u0435\u0442"}),Object(g.jsx)(m.a,{style:{marginTop:".5rem"}})]}),Object(g.jsx)(b.f,{children:Object(g.jsx)(b.d,{stretched:!0,size:"l",mode:"outline",children:Object(g.jsx)(O.a,{})})})]}),o.id===u.organizer.id&&Object(g.jsx)(b.f,{children:Object(g.jsx)(b.d,{stretched:!0,size:"l",mode:"outline",onClick:function(){C("close")},children:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0437\u0434\u0435\u0441\u044c \u0434\u043b\u044f \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f \u0441\u0447\u0435\u0442\u0430 \u0438 \u043f\u043e\u0434\u0441\u0447\u0435\u0442\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"})}),o.id!==u.organizer.id&&Object(g.jsx)(b.f,{children:Object(g.jsx)(b.d,{stretched:!0,size:"l",mode:"destructive",onClick:function(){C("leave")},children:"\u0412\u044b\u0439\u0442\u0438"})})]})})})},S=function(){var e=Object(n.useState)("home"),t=Object(h.a)(e,2),c=t[0],i=t[1],r=Object(n.useState)(null),s=Object(h.a)(r,2),l=s[0],a=s[1],u=Object(n.useState)(Object(g.jsx)(b.r,{size:"large"})),x=Object(h.a)(u,2),O=x[0],f=x[1],m=Object(n.useState)(null),p=Object(h.a)(m,2),w=p[0],k=p[1];Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,a(t),f(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,c=t.type,n=t.data;if("VKWebAppUpdateConfig"===c){var i=document.createAttribute("scheme");i.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(i)}})),function(){e.apply(this,arguments)}()}),[]);var z=function(e){e.currentTarget.dataset.checkclose?function(e){var t=window.location.search.slice(1);fetch("https://pieceofchit.xyz/api/v1/check/close/?"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(){}))}(e.currentTarget.dataset.checkclose):e.currentTarget.dataset.checkleave&&function(e){var t=window.location.search.slice(1);fetch("https://pieceofchit.xyz/api/v1/check/leave/?"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(){}))}(e.currentTarget.dataset.checkleave),i(e.currentTarget.dataset.to),k(e.currentTarget.dataset.check)};return Object(g.jsx)(b.a,{children:Object(g.jsx)(b.b,{children:Object(g.jsxs)(b.t,{activePanel:c,popout:O,children:[Object(g.jsx)(v,{id:"home",fetchedUser:l,go:z}),Object(g.jsx)(y,{id:"create",fetchedUser:l,go:z}),Object(g.jsx)(T,{id:"check",fetchedUser:l,go:z,check:w})]})})})};o.a.send("VKWebAppInit"),s.a.render(Object(g.jsx)(S,{}),document.getElementById("root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.287007c1.chunk.js.map